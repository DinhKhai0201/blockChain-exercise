{"ast":null,"code":"'use strict';\n\nconst dagNodeUtil = require('./util');\n\nconst cloneLinks = dagNodeUtil.cloneLinks;\nconst cloneData = dagNodeUtil.cloneData;\n\nconst create = require('./create');\n\nconst CID = require('cids');\n\nfunction rmLink(dagNode, nameOrCid, callback) {\n  const data = cloneData(dagNode);\n  let links = cloneLinks(dagNode);\n\n  if (typeof nameOrCid === 'string') {\n    links = links.filter(link => link.name !== nameOrCid);\n  } else if (Buffer.isBuffer(nameOrCid) || CID.isCID(nameOrCid)) {\n    links = links.filter(link => !link.cid.equals(nameOrCid));\n  } else {\n    return callback(new Error('second arg needs to be a name or CID'), null);\n  }\n\n  create(data, links, callback);\n}\n\nmodule.exports = rmLink;","map":null,"metadata":{},"sourceType":"script"}